(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{obiL:function(a,t,e){"use strict";e.r(t),e.d(t,"AplicacaoVacinaModule",function(){return Q});var i=e("ZehF"),c=e("VNNB"),r=e("fXoL"),o=e("IheW");let n=(()=>{class a{constructor(a,t){this.http=a,this.headers=t}buscarPaciente(a){return this.http.get(`${c.a.apiDev}/usuarios/${a}`,this.headers.getHttpHeaders())}buscarPorCpfPaciente(a){return this.http.get(`${c.a.apiDev}/usuarios/cpf/${a}`,this.headers.getHttpHeaders())}buscarVacinaPorPaciente(a){return this.http.get(`${c.a.apiDev}/vacinas/usuario/${a}`,this.headers.getHttpHeaders())}salvarVacinacao(a){return this.http.post(`${c.a.apiDev}/vacinas`,a,this.headers.getHttpHeaders())}excluirVacinaDoPaciente(a){return this.http.delete(`${c.a.apiDev}/vacinas/${a}`,this.headers.getHttpHeaders())}}return a.\u0275fac=function(t){return new(t||a)(r.cc(o.a),r.cc(i.a))},a.\u0275prov=r.Lb({token:a,factory:a.\u0275fac}),a})();var s=e("ofXK"),b=e("tyNb");let u=(()=>{class a{constructor(){}ngOnInit(){}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=r.Jb({type:a,selectors:[["app-aplicacao-vacina-model"]],decls:1,vars:0,template:function(a,t){1&a&&r.Qb(0,"router-outlet")},directives:[b.f],styles:[""]}),a})();var p=e("syFU"),l=e("s7LF"),m=e("H1qn"),d=e("wd/R");e("0tRk"),d.locale("pt-br");class h{constructor(a){this.id=null,this.id=a.id,this.nomeDaVacina=a.nomeDaVacina,this.dataDaAplicacao=a.dataDaAplicacao,this.usuario=a.usuario,this.dataDaAplicacaoFormatada=this.getDataDaAplicacaoFormatada(a.dataDaAplicacao)}getId(){return this.id}getNomeDaVacina(){return this.nomeDaVacina}setNomeDaVacina(a){this.nomeDaVacina=a}getDataDaAplicacao(){return this.dataDaAplicacao}getDataDaAplicacaoFormatada(a){return this.dataDaAplicacaoFormatada=d(a).format("DD/MM/YYYY")}setDataDaAplicacao(a){this.dataDaAplicacao=a}getPaciente(){return this.usuario}setPaciente(a){this.usuario=a}}var f=e("zHaW"),V=e("k7SU"),D=e("/bvK"),U=e("Wp6s"),v=e("9Yzh"),g=e("Q2Ze"),C=e("e6WT"),P=e("tmjD"),H=e("bTqV"),k=e("TN/R"),N=e("Qu3c"),F=e("Tj54");function S(a,t){if(1&a&&(r.Vb(0,"div",18),r.Vb(1,"mat-card"),r.Vb(2,"mat-card-content"),r.Vb(3,"mat-card-title"),r.Hc(4,"Dados do Paciente"),r.Ub(),r.Vb(5,"mat-card-content",19),r.Vb(6,"div",20),r.Vb(7,"table",21),r.Vb(8,"thead"),r.Vb(9,"tr"),r.Vb(10,"th"),r.Hc(11,"Nome:"),r.Ub(),r.Vb(12,"th"),r.Hc(13,"CPF:"),r.Ub(),r.Vb(14,"th"),r.Hc(15,"Email:"),r.Ub(),r.Vb(16,"th"),r.Hc(17,"Data de Nasc:"),r.Ub(),r.Ub(),r.Ub(),r.Vb(18,"tbody"),r.Vb(19,"tr"),r.Vb(20,"td"),r.Hc(21),r.Ub(),r.Vb(22,"td"),r.Hc(23),r.Ub(),r.Vb(24,"td"),r.Hc(25),r.Ub(),r.Vb(26,"td"),r.Hc(27),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub()),2&a){const a=r.jc();r.Cb(21),r.Ic(a.paciente.nome),r.Cb(2),r.Ic(a.paciente.numeroDoCpf),r.Cb(2),r.Ic(a.paciente.email),r.Cb(2),r.Ic(a.paciente.dataDeNascimentoFormatada)}}function y(a,t){if(1&a){const a=r.Wb();r.Tb(0),r.Vb(1,"tr"),r.Vb(2,"td"),r.Hc(3),r.Ub(),r.Vb(4,"td"),r.Hc(5),r.Ub(),r.Vb(6,"td"),r.Vb(7,"button",23),r.fc("click",function(){r.zc(a);const e=t.$implicit;return r.jc(2).excluir(e.getId())}),r.Vb(8,"mat-icon"),r.Hc(9,"delete"),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Sb()}if(2&a){const a=t.$implicit;r.Cb(3),r.Ic(a.getNomeDaVacina()),r.Cb(2),r.Ic(a.getDataDaAplicacaoFormatada(a.getDataDaAplicacao()))}}function I(a,t){if(1&a&&(r.Vb(0,"mat-card"),r.Vb(1,"mat-card-title"),r.Hc(2,"Aplica\xe7\xf5es"),r.Ub(),r.Vb(3,"mat-card-content",20),r.Vb(4,"table",21),r.Vb(5,"thead"),r.Vb(6,"tr"),r.Vb(7,"th"),r.Hc(8,"Nome da Vacina"),r.Ub(),r.Vb(9,"th"),r.Hc(10,"Data da Aplica\xe7\xe3o"),r.Ub(),r.Vb(11,"th"),r.Hc(12,"Excluir"),r.Ub(),r.Ub(),r.Ub(),r.Vb(13,"tbody"),r.Fc(14,y,10,2,"ng-container",22),r.Ub(),r.Ub(),r.Ub(),r.Ub()),2&a){const a=r.jc();r.Cb(14),r.pc("ngForOf",a.pacienteVacinas)}}const w=function(){return["/aplicacao-vacina/aplicacao"]};let A=(()=>{class a{constructor(a,t,e,i,c,r){this.fb=a,this.aplicacaoService=t,this.snackBar=e,this.router=i,this.activeRoute=c,this.helperService=r,this.pacienteVacinas=[]}ngOnInit(){this.activeRoute.params.subscribe(a=>{a.cpf?(this.cpf=a.cpf,this.criaFormularios(),this.buscarDadosPacienteRota(this.cpf)):this.criaFormularios()})}criaFormularios(){this.formularioBusca=this.fb.group({numeroDoCpf:["",[l.q.required,this.validateCPF]]}),this.formulario=this.fb.group({id:[""],nomeDaVacina:["",[l.q.required]],dataDaAplicacao:["",[l.q.required]],usuario:this.fb.group({id:["",l.q.required],nome:[""],email:[""],numeroDoCpf:[""],dataDeNascimento:[""]})})}vacinarPaciente(){this.formulario.patchValue({nomeDaVacina:this.formataNomeVacina(this.formulario.controls.nomeDaVacina.value)}),this.aplicacaoService.salvarVacinacao(this.formulario.value).subscribe(a=>{this.openSnackBar("Paciente vacinado com Sucesso!"),this.buscarDadosPacientePadrao()},a=>{400===a.status&&this.openSnackBar(a.error.message),422===a.status&&a.error.errors.forEach(a=>{this.openSnackBar(a.message)})})}buscarDadosPacienteRota(a){this.buscarDados(a),this.formularioBusca.patchValue({numeroDoCpf:a})}buscarDadosPacientePadrao(){this.buscarDados(this.formularioBusca.controls.numeroDoCpf.value)}buscarDados(a){this.aplicacaoService.buscarPorCpfPaciente(a).subscribe(a=>{this.paciente=new p.a(Object.assign({},a)),this.aplicacaoService.buscarVacinaPorPaciente(this.paciente.getId()).subscribe(a=>{this.pacienteVacinas=[],a.forEach(a=>{const t=new h(Object.assign({},a));this.pacienteVacinas.push(t)})}),this.formulario.controls.usuario.patchValue({id:this.paciente.getId(),nome:this.paciente.getNome(),email:this.paciente.getEmail(),numeroDoCpf:this.paciente.getNumeroDoCpf(),dataDeNascimento:this.paciente.getDataDeNascimento()})},a=>{404===a.status&&(this.openSnackBar(a.error.message),this.limpaCampos())})}isCPF(){return null==this.cpfCnpj||this.cpfCnpj.length<12}getCpfCnpjMask(){return this.isCPF()?"000.000.000-009":"00.000.000/0000-00"}validateCPF(a){return m.a.isValid(a.value)?null:{cpfValid:!0}}openSnackBar(a){this.snackBar.open(a,"",{duration:2e3})}adicionaPacienteVacinado(a){this.formulario.get("usuario").push(a)}formataNomeVacina(a){return this.helperService.formataNome(a)}excluir(a){null===a&&void 0===a||this.aplicacaoService.excluirVacinaDoPaciente(a).subscribe(()=>{this.buscarDadosPacientePadrao(),this.openSnackBar("Vacina\xe7\xe3o excluida com Sucesso!")},a=>console.log(a))}limpaCampos(){this.paciente=void 0,this.pacienteVacinas=[],this.formulario.reset(),this.formularioPaciente&&this.formularioPaciente.reset(),this.formularioBusca.reset()}}return a.\u0275fac=function(t){return new(t||a)(r.Pb(l.d),r.Pb(n),r.Pb(f.a),r.Pb(b.b),r.Pb(b.a),r.Pb(V.a))},a.\u0275cmp=r.Jb({type:a,selectors:[["app-aplicacao-vacina"]],decls:47,vars:11,consts:[[1,"container","my-3"],[1,"row","py-3"],[1,"col-sm-6","my-2"],[1,"w-50"],[3,"formGroup","ngSubmit"],["appearance","fill"],["matInput","","formControlName","numeroDoCpf",3,"mask"],[1,"row"],[1,"col-sm-4"],["type","submit","mat-raised-button","","color","primary",3,"disabled"],["mat-raised-button","","color","warn",1,"text-decoration-none",3,"routerLink","click"],["matInput","","formControlName","nomeDaVacina"],["matInput","","formControlName","dataDaAplicacao",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],["class","col-sm-12",4,"ngIf"],[1,"col-sm-12","my-3"],[4,"ngIf"],[1,"col-sm-12"],[1,"my-2"],[1,"table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],["mat-icon-button","","color","warn","matTooltip","excluir","matTooltipPosition","above",3,"click"]],template:function(a,t){if(1&a&&(r.Qb(0,"app-navbar"),r.Vb(1,"article",0),r.Vb(2,"div",1),r.Vb(3,"div",2),r.Vb(4,"mat-card"),r.Vb(5,"mat-card-title"),r.Hc(6,"Buscar Paciente"),r.Ub(),r.Vb(7,"mat-card-content"),r.Vb(8,"div",3),r.Vb(9,"form",4),r.fc("ngSubmit",function(){return t.buscarDadosPacientePadrao()}),r.Vb(10,"mat-form-field",5),r.Vb(11,"mat-label"),r.Hc(12,"Digite o Numero do CPF."),r.Ub(),r.Qb(13,"input",6),r.Ub(),r.Vb(14,"div",7),r.Vb(15,"div",8),r.Vb(16,"p"),r.Vb(17,"button",9),r.Hc(18,"Buscar"),r.Ub(),r.Ub(),r.Ub(),r.Vb(19,"div",8),r.Vb(20,"p"),r.Vb(21,"a",10),r.fc("click",function(){return t.limpaCampos()}),r.Hc(22,"Limpar"),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(23,"div",2),r.Vb(24,"mat-card"),r.Vb(25,"mat-card-title"),r.Hc(26,"Aplica\xe7\xe3o de Vacina"),r.Ub(),r.Vb(27,"mat-card-content"),r.Vb(28,"form",4),r.fc("ngSubmit",function(){return t.vacinarPaciente()}),r.Vb(29,"mat-form-field",5),r.Vb(30,"mat-label"),r.Hc(31,"Nome da vacina aplicada"),r.Ub(),r.Qb(32,"input",11),r.Ub(),r.Vb(33,"mat-form-field",5),r.Vb(34,"mat-label"),r.Hc(35,"Data da aplica\xe7\xe3o"),r.Ub(),r.Qb(36,"input",12),r.Qb(37,"mat-datepicker-toggle",13),r.Qb(38,"mat-datepicker",null,14),r.Ub(),r.Vb(40,"p"),r.Vb(41,"button",9),r.Hc(42,"Vacinar"),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Ub(),r.Vb(43,"div",7),r.Fc(44,S,28,4,"div",15),r.Vb(45,"div",16),r.Fc(46,I,15,1,"mat-card",17),r.Ub(),r.Ub(),r.Ub()),2&a){const a=r.xc(39);r.Cb(9),r.pc("formGroup",t.formularioBusca),r.Cb(4),r.pc("mask",t.getCpfCnpjMask()),r.Cb(4),r.pc("disabled",!t.formularioBusca.valid),r.Cb(4),r.pc("routerLink",r.sc(10,w)),r.Cb(7),r.pc("formGroup",t.formulario),r.Cb(8),r.pc("matDatepicker",a),r.Cb(1),r.pc("for",a),r.Cb(4),r.pc("disabled",!t.formulario.valid),r.Cb(3),r.pc("ngIf",null!=t.paciente),r.Cb(2),r.pc("ngIf",t.pacienteVacinas.length>0)}},directives:[D.a,U.a,U.d,U.b,l.s,l.m,v.c,l.g,g.b,g.e,C.b,l.c,P.a,l.l,l.f,H.b,H.a,b.d,k.b,k.d,g.f,k.a,s.l,s.k,N.a,F.a],styles:[""]}),a})();const B=[{path:"aplicacao",component:u,children:[{path:"",component:A},{path:":cpf",component:A}]}];let j=(()=>{class a{}return a.\u0275mod=r.Nb({type:a}),a.\u0275inj=r.Mb({factory:function(t){return new(t||a)},imports:[[b.e.forChild(B)],b.e]}),a})();var x=e("PCNd"),$=e("8pg1"),q=e("Tx//");let Q=(()=>{class a{}return a.\u0275mod=r.Nb({type:a}),a.\u0275inj=r.Mb({factory:function(t){return new(t||a)},providers:[n,i.a,V.a],imports:[[s.c,j,q.a,$.a,x.a]]}),a})()}}]);